var pe=Object.defineProperty;var fe=(e,t,o)=>t in e?pe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o;var u=(e,t,o)=>fe(e,typeof t!="symbol"?t+"":t,o);import{i as be,a as ge,r as b,j as n,L as me,b as xe,u as L,c as ye,d as te,e as ve,f as we,g as Ce,h as Me,k as Se,l as Ne,m as je,n as Fe,o as $e,p as Ee,q as ke,s as U,t as Le,v as Te,P as Ae}from"./vendor-CXYeIPxP.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function o(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerPolicy&&(i.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?i.credentials="include":l.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(l){if(l.ep)return;l.ep=!0;const i=o(l);fetch(l.href,i)}})();const De={label:"File",tooltip:"Open the file menu"},Re={label:"New File",tooltip:"Create a new file",shortcut:"Ctrl+N"},ze={label:"Open File",tooltip:"Open an existing file",shortcut:"Ctrl+O"},Pe={label:"Save File",tooltip:"Save the current file",shortcut:"Ctrl+S"},Be={label:"Save As",tooltip:"Save the current file with a new name"},Ie={label:"Import File",tooltip:"Import a file into the project"},Oe={label:"Export",tooltip:"Export the current file"},Ue={label:"Export as PNG",tooltip:"Export the file as a PNG image"},Xe={label:"Export as PDF",tooltip:"Export the file as a PDF document"},Ve={label:"Export as CSV",tooltip:"Export the file as a CSV file"},Ye={label:"Print",tooltip:"Print the current file"},He={label:"Close File",tooltip:"Close the current file"},_e={label:"Edit",tooltip:"Open the edit menu"},Ke={label:"Undo",tooltip:"Undo the last action",shortcut:"Ctrl+Z"},We={label:"Redo",tooltip:"Redo the last undone action",shortcut:"Ctrl+Y"},Ge={label:"Cut",tooltip:"Cut the selected content",shortcut:"Ctrl+X"},Ze={label:"Copy",tooltip:"Copy the selected content",shortcut:"Ctrl+C"},qe={label:"Paste",tooltip:"Paste the copied content",shortcut:"Ctrl+V"},Qe={label:"Duplicate",tooltip:"Duplicate the selected content",shortcut:"Ctrl+D"},Je={label:"Select All",tooltip:"Select all content",shortcut:"Ctrl+A"},et={label:"Find & Replace",tooltip:"Find and replace text",shortcut:"Ctrl+F"},tt={label:"View",tooltip:"Open the view menu"},ot={label:"Zoom In",tooltip:"Zoom in on the document",shortcut:"Ctrl++"},st={label:"Zoom Out",tooltip:"Zoom out of the document",shortcut:"Ctrl+-"},lt={label:"Fit to Screen",tooltip:"Fit the content to the screen"},it={label:"Toggle Grid",tooltip:"Show or hide the grid"},nt={label:"Toggle Guides",tooltip:"Show or hide the guides"},at={label:"Fullscreen Mode",tooltip:"Switch to fullscreen mode",shortcut:"F11"},rt={label:"Shape",tooltip:"Open the shape menu"},ct={label:"Add Node",tooltip:"Add a new node to the diagram"},dt={label:"Delete Node",tooltip:"Delete the selected node"},ht={label:"Move Node",tooltip:"Move the selected node"},ut={label:"Resize Node",tooltip:"Resize the selected node"},pt={label:"Rotate Node",tooltip:"Rotate the selected node"},ft={label:"Change Node Color",tooltip:"Change the color of the selected node"},bt={label:"Change Node Border",tooltip:"Change the border of the selected node"},gt={label:"Change Node Text",tooltip:"Edit the text of the selected node"},mt={label:"Group Nodes",tooltip:"Group selected nodes together"},xt={label:"Ungroup Nodes",tooltip:"Ungroup the selected nodes"},yt={label:"Lock Node",tooltip:"Lock the selected node"},vt={label:"Unlock Node",tooltip:"Unlock the selected node"},wt={label:"Connection",tooltip:"Open the connection menu"},Ct={label:"Add Edge",tooltip:"Add an edge between nodes"},Mt={label:"Delete Edge",tooltip:"Delete the selected edge"},St={label:"Change Edge Style",tooltip:"Change the style of the selected edge"},Nt={label:"Change Edge Color",tooltip:"Change the color of the selected edge"},jt={label:"Change Edge Label",tooltip:"Change the label of the selected edge"},Ft={label:"Reverse Edge",tooltip:"Reverse the direction of the selected edge"},$t={label:"Text",tooltip:"Open the text menu"},Et={label:"Add Text",tooltip:"Add text to the document"},kt={label:"Edit Text",tooltip:"Edit the selected text"},Lt={label:"Change Font",tooltip:"Change the font of the selected text"},Tt={label:"Change Font Size",tooltip:"Change the font size of the selected text"},At={label:"Change Font Color",tooltip:"Change the font color of the selected text"},Dt={label:"Bold Text",tooltip:"Make the selected text bold",shortcut:"Ctrl+B"},Rt={label:"Italic Text",tooltip:"Make the selected text italic",shortcut:"Ctrl+I"},zt={label:"Underline Text",tooltip:"Underline the selected text",shortcut:"Ctrl+U"},Pt={label:"Align Text",tooltip:"Align the selected text"},Bt={label:"Layer",tooltip:"Open the layer menu"},It={label:"Send to Back",tooltip:"Send the selected layer to the back"},Ot={label:"Bring to Front",tooltip:"Bring the selected layer to the front"},Ut={label:"Send Backward",tooltip:"Send the selected layer one step backward"},Xt={label:"Bring Forward",tooltip:"Bring the selected layer one step forward"},Vt={label:"Duplicate Layer",tooltip:"Duplicate the selected layer"},Yt={label:"Delete Layer",tooltip:"Delete the selected layer"},Ht={label:"Toggle Layer Visibility",tooltip:"Show or hide the selected layer"},_t={label:"Collaboration",tooltip:"Open the collaboration menu"},Kt={label:"Add Comment",tooltip:"Add a comment to the document"},Wt={label:"Edit Comment",tooltip:"Edit the selected comment"},Gt={label:"Delete Comment",tooltip:"Delete the selected comment"},Zt={label:"Share Document",tooltip:"Share the document with others"},qt={file:De,newFile:Re,openFile:ze,saveFile:Pe,saveAs:Be,importFile:Ie,exportFile:Oe,exportFile_png:Ue,exportFile_pdf:Xe,exportFile_csv:Ve,print:Ye,closeFile:He,edit:_e,undo:Ke,redo:We,cut:Ge,copy:Ze,paste:qe,delete:{label:"Delete",tooltip:"Delete the selected content",shortcut:"Del"},duplicate:Qe,selectAll:Je,findReplace:et,view:tt,zoomIn:ot,zoomOut:st,fitToScreen:lt,toggleGrid:it,toggleGuides:nt,fullscreenMode:at,shape:rt,addNode:ct,deleteNode:dt,moveNode:ht,resizeNode:ut,rotateNode:pt,changeNodeColor:ft,changeNodeBorder:bt,changeNodeText:gt,groupNodes:mt,ungroupNodes:xt,lockNode:yt,unlockNode:vt,connection:wt,addEdge:Ct,deleteEdge:Mt,changeEdgeStyle:St,changeEdgeColor:Nt,changeEdgeLabel:jt,reverseEdge:Ft,text:$t,addText:Et,editText:kt,changeFont:Lt,changeFontSize:Tt,changeFontColor:At,boldText:Dt,italicText:Rt,underlineText:zt,alignText:Pt,layer:Bt,sendToBack:It,bringToFront:Ot,sendBackward:Ut,bringForward:Xt,duplicateLayer:Vt,deleteLayer:Yt,toggleLayerVisibility:Ht,collaboration:_t,addComment:Kt,editComment:Wt,deleteComment:Gt,shareDocument:Zt},Qt={label:"Init",tooltip:"Initialize the file"},Jt={label:"Add Modules",tooltip:"Add new modules to the file"},eo={label:"Delete Modules",tooltip:"Remove modules from the file"},to={label:"Paste Modules",tooltip:"Paste modules into the file"},oo={label:"Duplicate Modules",tooltip:"Duplicate selected modules"},so={label:"Modify Modules",tooltip:"Modify the properties of modules"},lo={init:Qt,addModules:Jt,deleteModules:eo,pasteModules:to,duplicateModules:oo,modifyModules:so},io={label:"文件",tooltip:"打开文件菜单"},no={label:"新建文件",tooltip:"创建新文件",shortcut:"Ctrl+N"},ao={label:"打开文件",tooltip:"打开现有文件",shortcut:"Ctrl+O"},ro={label:"保存文件",tooltip:"保存当前文件",shortcut:"Ctrl+S"},co={label:"另存为",tooltip:"以新名称保存当前文件"},ho={label:"导入文件",tooltip:"将文件导入到项目中"},uo={label:"导出",tooltip:"导出当前文件"},po={label:"导出为PNG",tooltip:"将文件导出为PNG图像"},fo={label:"导出为PDF",tooltip:"将文件导出为PDF文档"},bo={label:"导出为CSV",tooltip:"将文件导出为CSV文件"},go={label:"打印",tooltip:"打印当前文件"},mo={label:"关闭文件",tooltip:"关闭当前文件"},xo={label:"编辑",tooltip:"打开编辑菜单"},yo={label:"撤销",tooltip:"撤销上一步操作",shortcut:"Ctrl+Z"},vo={label:"重做",tooltip:"重做上一次撤销的操作",shortcut:"Ctrl+Y"},wo={label:"剪切",tooltip:"剪切选定的内容",shortcut:"Ctrl+X"},Co={label:"复制",tooltip:"复制选定的内容",shortcut:"Ctrl+C"},Mo={label:"粘贴",tooltip:"粘贴复制的内容",shortcut:"Ctrl+V"},So={label:"复制",tooltip:"复制选定的内容",shortcut:"Ctrl+D"},No={label:"全选",tooltip:"选择所有内容",shortcut:"Ctrl+A"},jo={label:"查找和替换",tooltip:"查找和替换文本",shortcut:"Ctrl+F"},Fo={label:"视图",tooltip:"打开视图菜单"},$o={label:"放大",tooltip:"放大文档",shortcut:"Ctrl++"},Eo={label:"缩小",tooltip:"缩小文档",shortcut:"Ctrl+-"},ko={label:"适应屏幕",tooltip:"使内容适应屏幕"},Lo={label:"切换网格",tooltip:"显示或隐藏网格"},To={label:"切换参考线",tooltip:"显示或隐藏参考线"},Ao={label:"全屏模式",tooltip:"切换到全屏模式",shortcut:"F11"},Do={label:"形状",tooltip:"打开形状菜单"},Ro={label:"添加节点",tooltip:"向图表添加新节点"},zo={label:"删除节点",tooltip:"删除选定的节点"},Po={label:"移动节点",tooltip:"移动选定的节点"},Bo={label:"调整节点大小",tooltip:"调整选定节点的大小"},Io={label:"旋转节点",tooltip:"旋转选定的节点"},Oo={label:"更改节点颜色",tooltip:"更改选定节点的颜色"},Uo={label:"更改节点边框",tooltip:"更改选定节点的边框"},Xo={label:"更改节点文本",tooltip:"编辑选定节点的文本"},Vo={label:"组合节点",tooltip:"将选定的节点组合在一起"},Yo={label:"取消组合节点",tooltip:"取消组合选定的节点"},Ho={label:"锁定节点",tooltip:"锁定选定的节点"},_o={label:"解锁节点",tooltip:"解锁选定的节点"},Ko={label:"连接",tooltip:"打开连接菜单"},Wo={label:"添加边",tooltip:"在节点之间添加边"},Go={label:"删除边",tooltip:"删除选定的边"},Zo={label:"更改边样式",tooltip:"更改选定边的样式"},qo={label:"更改边颜色",tooltip:"更改选定边的颜色"},Qo={label:"更改边标签",tooltip:"更改选定边的标签"},Jo={label:"反转边",tooltip:"反转选定边的方向"},es={label:"文本",tooltip:"打开文本菜单"},ts={label:"添加文本",tooltip:"向文档添加文本"},os={label:"编辑文本",tooltip:"编辑选定的文本"},ss={label:"更改字体",tooltip:"更改选定文本的字体"},ls={label:"更改字体大小",tooltip:"更改选定文本的字体大小"},is={label:"更改字体颜色",tooltip:"更改选定文本的字体颜色"},ns={label:"粗体文本",tooltip:"将选定的文本设置为粗体",shortcut:"Ctrl+B"},as={label:"斜体文本",tooltip:"将选定的文本设置为斜体",shortcut:"Ctrl+I"},rs={label:"下划线文本",tooltip:"为选定的文本添加下划线",shortcut:"Ctrl+U"},cs={label:"对齐文本",tooltip:"对齐选定的文本"},ds={label:"图层",tooltip:"打开图层菜单"},hs={label:"置于底层",tooltip:"将选定的图层置于底层"},us={label:"置于顶层",tooltip:"将选定的图层置于顶层"},ps={label:"下移一层",tooltip:"将选定的图层下移一层"},fs={label:"上移一层",tooltip:"将选定的图层上移一层"},bs={label:"复制图层",tooltip:"复制选定的图层"},gs={label:"删除图层",tooltip:"删除选定的图层"},ms={label:"切换图层可见性",tooltip:"显示或隐藏选定的图层"},xs={label:"协作",tooltip:"打开协作菜单"},ys={label:"添加评论",tooltip:"向文档添加评论"},vs={label:"编辑评论",tooltip:"编辑选定的评论"},ws={label:"删除评论",tooltip:"删除选定的评论"},Cs={label:"分享文档",tooltip:"与他人分享文档"},Ms={file:io,newFile:no,openFile:ao,saveFile:ro,saveAs:co,importFile:ho,exportFile:uo,exportFile_png:po,exportFile_pdf:fo,exportFile_csv:bo,print:go,closeFile:mo,edit:xo,undo:yo,redo:vo,cut:wo,copy:Co,paste:Mo,delete:{label:"删除",tooltip:"删除选定的内容",shortcut:"Del"},duplicate:So,selectAll:No,findReplace:jo,view:Fo,zoomIn:$o,zoomOut:Eo,fitToScreen:ko,toggleGrid:Lo,toggleGuides:To,fullscreenMode:Ao,shape:Do,addNode:Ro,deleteNode:zo,moveNode:Po,resizeNode:Bo,rotateNode:Io,changeNodeColor:Oo,changeNodeBorder:Uo,changeNodeText:Xo,groupNodes:Vo,ungroupNodes:Yo,lockNode:Ho,unlockNode:_o,connection:Ko,addEdge:Wo,deleteEdge:Go,changeEdgeStyle:Zo,changeEdgeColor:qo,changeEdgeLabel:Qo,reverseEdge:Jo,text:es,addText:ts,editText:os,changeFont:ss,changeFontSize:ls,changeFontColor:is,boldText:ns,italicText:as,underlineText:rs,alignText:cs,layer:ds,sendToBack:hs,bringToFront:us,sendBackward:ps,bringForward:fs,duplicateLayer:bs,deleteLayer:gs,toggleLayerVisibility:ms,collaboration:xs,addComment:ys,editComment:vs,deleteComment:ws,shareDocument:Cs},Ss={label:"初始化",tooltip:"初始化文件"},Ns={label:"添加模块",tooltip:"向文件添加新模块"},js={label:"删除模块",tooltip:"从文件中移除模块"},Fs={label:"粘贴模块",tooltip:"将模块粘贴到文件中"},$s={label:"复制模块",tooltip:"复制选定的模块"},Es={label:"修改模块",tooltip:"修改模块的属性"},ks={init:Ss,addModules:Ns,deleteModules:js,pasteModules:Fs,duplicateModules:$s,modifyModules:Es},Ls={label:"ファイル",tooltip:"ファイルメニューを開く"},Ts={label:"新規ファイル",tooltip:"新規ファイルを作成",shortcut:"Ctrl+N"},As={label:"ファイルを開く",tooltip:"既存のファイルを開く",shortcut:"Ctrl+O"},Ds={label:"ファイルを保存",tooltip:"現在のファイルを保存",shortcut:"Ctrl+S"},Rs={label:"名前を付けて保存",tooltip:"現在のファイルに新しい名前を付けて保存"},zs={label:"ファイルをインポート",tooltip:"プロジェクトにファイルをインポート"},Ps={label:"エクスポート",tooltip:"現在のファイルをエクスポート"},Bs={label:"PNGとしてエクスポート",tooltip:"ファイルをPNG画像としてエクスポート"},Is={label:"PDFとしてエクスポート",tooltip:"ファイルをPDFドキュメントとしてエクスポート"},Os={label:"CSVとしてエクスポート",tooltip:"ファイルをCSVファイルとしてエクスポート"},Us={label:"印刷",tooltip:"現在のファイルを印刷"},Xs={label:"ファイルを閉じる",tooltip:"現在のファイルを閉じる"},Vs={label:"編集",tooltip:"編集メニューを開く"},Ys={label:"元に戻す",tooltip:"最後のアクションを元に戻す",shortcut:"Ctrl+Z"},Hs={label:"やり直し",tooltip:"最後に元に戻したアクションをやり直す",shortcut:"Ctrl+Y"},_s={label:"切り取り",tooltip:"選択したコンテンツを切り取り",shortcut:"Ctrl+X"},Ks={label:"コピー",tooltip:"選択したコンテンツをコピー",shortcut:"Ctrl+C"},Ws={label:"貼り付け",tooltip:"コピーしたコンテンツを貼り付け",shortcut:"Ctrl+V"},Gs={label:"複製",tooltip:"選択したコンテンツを複製",shortcut:"Ctrl+D"},Zs={label:"すべて選択",tooltip:"すべてのコンテンツを選択",shortcut:"Ctrl+A"},qs={label:"検索と置換",tooltip:"テキストを検索して置換",shortcut:"Ctrl+F"},Qs={label:"表示",tooltip:"表示メニューを開く"},Js={label:"拡大",tooltip:"ドキュメントを拡大",shortcut:"Ctrl++"},el={label:"縮小",tooltip:"ドキュメントを縮小",shortcut:"Ctrl+-"},tl={label:"画面に合わせる",tooltip:"コンテンツを画面に合わせる"},ol={label:"グリッドの切り替え",tooltip:"グリッドを表示または非表示"},sl={label:"ガイドの切り替え",tooltip:"ガイドを表示または非表示"},ll={label:"全画面モード",tooltip:"全画面モードに切り替え",shortcut:"F11"},il={label:"図形",tooltip:"図形メニューを開く"},nl={label:"ノードを追加",tooltip:"ダイアグラムに新しいノードを追加"},al={label:"ノードを削除",tooltip:"選択したノードを削除"},rl={label:"ノードを移動",tooltip:"選択したノードを移動"},cl={label:"ノードのサイズを変更",tooltip:"選択したノードのサイズを変更"},dl={label:"ノードを回転",tooltip:"選択したノードを回転"},hl={label:"ノードの色を変更",tooltip:"選択したノードの色を変更"},ul={label:"ノードの境界線を変更",tooltip:"選択したノードの境界線を変更"},pl={label:"ノードのテキストを変更",tooltip:"選択したノードのテキストを編集"},fl={label:"ノードをグループ化",tooltip:"選択したノードをグループ化"},bl={label:"ノードのグループ化を解除",tooltip:"選択したノードのグループ化を解除"},gl={label:"ノードをロック",tooltip:"選択したノードをロック"},ml={label:"ノードのロックを解除",tooltip:"選択したノードのロックを解除"},xl={label:"接続",tooltip:"接続メニューを開く"},yl={label:"エッジを追加",tooltip:"ノード間にエッジを追加"},vl={label:"エッジを削除",tooltip:"選択したエッジを削除"},wl={label:"エッジのスタイルを変更",tooltip:"選択したエッジのスタイルを変更"},Cl={label:"エッジの色を変更",tooltip:"選択したエッジの色を変更"},Ml={label:"エッジのラベルを変更",tooltip:"選択したエッジのラベルを変更"},Sl={label:"エッジの方向を反転",tooltip:"選択したエッジの方向を反転"},Nl={label:"テキスト",tooltip:"テキストメニューを開く"},jl={label:"テキストを追加",tooltip:"ドキュメントにテキストを追加"},Fl={label:"テキストを編集",tooltip:"選択したテキストを編集"},$l={label:"フォントを変更",tooltip:"選択したテキストのフォントを変更"},El={label:"フォントサイズを変更",tooltip:"選択したテキストのフォントサイズを変更"},kl={label:"フォントの色を変更",tooltip:"選択したテキストのフォントの色を変更"},Ll={label:"テキストを太字にする",tooltip:"選択したテキストを太字にする",shortcut:"Ctrl+B"},Tl={label:"テキストを斜体にする",tooltip:"選択したテキストを斜体にする",shortcut:"Ctrl+I"},Al={label:"テキストに下線を引く",tooltip:"選択したテキストに下線を引く",shortcut:"Ctrl+U"},Dl={label:"テキストを配置",tooltip:"選択したテキストを配置"},Rl={label:"レイヤー",tooltip:"レイヤーメニューを開く"},zl={label:"最背面へ移動",tooltip:"選択したレイヤーを最背面へ移動"},Pl={label:"最前面へ移動",tooltip:"選択したレイヤーを最前面へ移動"},Bl={label:"背面へ移動",tooltip:"選択したレイヤーを1つ背面へ移動"},Il={label:"前面へ移動",tooltip:"選択したレイヤーを1つ前面へ移動"},Ol={label:"レイヤーを複製",tooltip:"選択したレイヤーを複製"},Ul={label:"レイヤーを削除",tooltip:"選択したレイヤーを削除"},Xl={label:"レイヤーの表示/非表示を切り替え",tooltip:"選択したレイヤーの表示/非表示を切り替え"},Vl={label:"コラボレーション",tooltip:"コラボレーションメニューを開く"},Yl={label:"コメントを追加",tooltip:"ドキュメントにコメントを追加"},Hl={label:"コメントを編集",tooltip:"選択したコメントを編集"},_l={label:"コメントを削除",tooltip:"選択したコメントを削除"},Kl={label:"ドキュメントを共有",tooltip:"ドキュメントを他のユーザーと共有"},Wl={file:Ls,newFile:Ts,openFile:As,saveFile:Ds,saveAs:Rs,importFile:zs,exportFile:Ps,exportFile_png:Bs,exportFile_pdf:Is,exportFile_csv:Os,print:Us,closeFile:Xs,edit:Vs,undo:Ys,redo:Hs,cut:_s,copy:Ks,paste:Ws,delete:{label:"削除",tooltip:"選択したコンテンツを削除",shortcut:"Del"},duplicate:Gs,selectAll:Zs,findReplace:qs,view:Qs,zoomIn:Js,zoomOut:el,fitToScreen:tl,toggleGrid:ol,toggleGuides:sl,fullscreenMode:ll,shape:il,addNode:nl,deleteNode:al,moveNode:rl,resizeNode:cl,rotateNode:dl,changeNodeColor:hl,changeNodeBorder:ul,changeNodeText:pl,groupNodes:fl,ungroupNodes:bl,lockNode:gl,unlockNode:ml,connection:xl,addEdge:yl,deleteEdge:vl,changeEdgeStyle:wl,changeEdgeColor:Cl,changeEdgeLabel:Ml,reverseEdge:Sl,text:Nl,addText:jl,editText:Fl,changeFont:$l,changeFontSize:El,changeFontColor:kl,boldText:Ll,italicText:Tl,underlineText:Al,alignText:Dl,layer:Rl,sendToBack:zl,bringToFront:Pl,sendBackward:Bl,bringForward:Il,duplicateLayer:Ol,deleteLayer:Ul,toggleLayerVisibility:Xl,collaboration:Vl,addComment:Yl,editComment:Hl,deleteComment:_l,shareDocument:Kl},Gl={label:"初期化",tooltip:"ファイルを初期化する"},Zl={label:"モジュールを追加",tooltip:"ファイルに新しいモジュールを追加する"},ql={label:"モジュールを削除",tooltip:"ファイルからモジュールを削除する"},Ql={label:"モジュールを貼り付け",tooltip:"ファイルにモジュールを貼り付ける"},Jl={label:"モジュールを複製",tooltip:"選択したモジュールを複製する"},ei={label:"モジュールを修正",tooltip:"モジュールのプロパティを修正する"},ti={init:Gl,addModules:Zl,deleteModules:ql,pasteModules:Ql,duplicateModules:Jl,modifyModules:ei},oi={en:{translation:{...qt,...lo}},cn:{translation:{...Ms,...ks}},jp:{translation:{...Wl,...ti}}};be.use(ge).init({resources:oi,lng:"en",fallbackLng:"en",interpolation:{escapeValue:!1}});const X=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)}),V=b.createContext({fileMap:new Map([["fbbeddd8-0996-4ebb-8c1e-9d1ea5312ebb",{id:"fbbeddd8-0996-4ebb-8c1e-9d1ea5312ebb",name:"Untitled 1",config:{},data:{}}]]),fileList:[],currentFileId:"fbbeddd8-0996-4ebb-8c1e-9d1ea5312ebb",creating:!1,switchFile:()=>{},closeFile:()=>{},createFile:()=>{},handleCreating:()=>{}}),si=({bg:e="#fff",onBgClick:t})=>{const o=b.useRef(null),{createFile:s,handleCreating:l}=b.useContext(V),[i,r]=b.useState(""),a=d=>/^[a-zA-Z0-9-_ ]+$/.test(d),c=d=>{var f;d.preventDefault(),d.stopPropagation();const h=(f=o.current)==null?void 0:f.filename.value.trim();if(!a(h)){r("File name can only including number space and alpha");return}r("");const p={id:X(),name:h,data:{},config:{}};s(p),l(!1)};return n.jsxs("div",{className:"fixed top-0 left-0 z-20 w-full h-full flex flex-row items-center justify-center text-sm select-none",children:[n.jsx("div",{style:{backgroundColor:e},onClick:()=>t&&t(),className:"absolute top-0 left-0 w-full h-full flex flex-row items-center justify-center text-sm select-none"}),n.jsxs("form",{ref:o,className:"relative w-100 min-h-30 z-20 p-4 bg-white rounded-xl shadow-2xl",onSubmit:c,children:[n.jsx("h1",{className:"text-xl text-center",children:"New File"}),n.jsx("label",{htmlFor:"filename",className:"block text-gray-700 font-medium mb-2",children:"File Name"}),n.jsx("input",{type:"text",autoFocus:!0,id:"filename",name:"filename",placeholder:"Enter file name",className:"w-full bg-gray-100 border border-gray-300 text-gray-700 py-2 px-4 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-200 ease-in-out"}),i&&n.jsx("div",{className:"text-red-500 my-2",children:i}),n.jsx("label",{className:"justify-center",children:n.jsx("button",{type:"submit",className:"mt-2 w-full bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-md transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-blue-300",children:"Create File"})})]})]})};function E(e){return e===null?"null":e===void 0?"undefined":e instanceof Set?"set":e instanceof Map?"map":Array.isArray(e)?"array":e instanceof Date?"date":e instanceof RegExp?"regexp":e instanceof Error?"error":e instanceof Promise?"promise":e instanceof ArrayBuffer?"arraybuffer":ArrayBuffer.isView(e)?"typedarray":e instanceof WeakSet?"weakset":e instanceof WeakMap?"weakmap":typeof e=="function"?"function":typeof e=="symbol"?"symbol":typeof e=="bigint"?"bigint":typeof e=="object"?"object":typeof e}const K=50,W=100;class li{constructor(t){u(this,"selectedModules",new Set);u(this,"resizeHandleSize",10);u(this,"activeResizeHandle",null);u(this,"isDestroyed",!1);u(this,"editor");u(this,"copiedItems",[]);u(this,"isSelectAll",!1);this.editor=t}getSelected(){return this.isSelectAll?"all":new Set(this.selectedModules.keys())}modifySelection(t,o){var l,i;if(E(t)!=="set"||t.size<=0)return;let s=t.size===1?this.editor.moduleMap.get([...t.values()][0]).getDetails():null;o==="replace"&&this.selectedModules.clear(),t.forEach(r=>{switch(o){case"add":this.selectedModules.add(r);break;case"delete":this.selectedModules.delete(r);break;case"toggle":this.selectedModules.has(r)?this.selectedModules.delete(r):this.selectedModules.add(r);break;case"replace":this.selectedModules.add(r);break}}),this.render(),(i=(l=this.editor.events).onSelectionUpdated)==null||i.call(l,t,s)}add(t){this.modifySelection(t,"add")}delete(t){this.modifySelection(t,"delete")}toggle(t){this.modifySelection(t,"toggle")}replace(t){this.modifySelection(t,"replace")}selectAll(){var t,o;this.selectedModules.clear(),this.isSelectAll=!0,this.render(),(o=(t=this.editor.events).onSelectionUpdated)==null||o.call(t,"all",null)}clear(){var t,o;this.selectedModules.clear(),this.isSelectAll=!1,this.render(),(o=(t=this.editor.events).onSelectionUpdated)==null||o.call(t,new Set,null)}copySelected(){this.copiedItems=[],this.copiedItems=this.editor.batchCopy(this.isSelectAll?"all":this.selectedModules,!0),this.updateCopiedItemsDelta()}pasteCopied(){const t=this.editor.batchCreate(this.copiedItems);this.editor.batchAdd(t,"pasteModules"),this.replace(new Set(t.keys())),this.updateCopiedItemsDelta()}duplicateSelected(){let t;this.isSelectAll?t=this.editor.batchCopy("all",!0):t=this.editor.batchCopy(this.selectedModules,!0),t.forEach(s=>{s.x+=K,s.y+=W});const o=this.editor.batchCreate(t);this.editor.batchAdd(o,"duplicateModules"),this.isSelectAll=!1,this.replace(new Set(o.keys()))}removeSelected(){this.isSelectAll?this.editor.batchDelete("all","deleteModules"):this.editor.batchDelete(this.selectedModules,"deleteModules"),this.editor.selectionManager.clear()}updateCopiedItemsDelta(){this.copiedItems.forEach(t=>{t.x+=K,t.y+=W})}getIfUnique(){return this.selectedModules.size===1?[...this.selectedModules.values()][0]:null}update(){var o,s;let t=null;this.selectedModules.size===1&&this.selectedModules.forEach(l=>{t=this.editor.moduleMap.get(l).getDetails()}),this.render(),(s=(o=this.editor.events).onSelectionUpdated)==null||s.call(o,this.selectedModules,t)}render(){this.editor.viewport.resetSelectionCanvas(),this.editor.viewport.renderSelectionCanvas()}destroy(){this.isDestroyed||(this.selectedModules.clear(),this.isDestroyed=!0,console.log("SelectionModule destroyed."))}}class G{constructor(t,o,s,l=-1){u(this,"data");u(this,"prev");u(this,"next");u(this,"id");this.data=s,this.prev=t,this.next=o,this.id=l}}class ii{constructor(){u(this,"head");u(this,"tail");u(this,"current");this.head=null,this.tail=null,this.current=null}detach(){return this.current&&(this.current.next=null,this.tail=this.current),this.current}append(t){let o;const{tail:s}=this;return s?(o=new G(s,null,t,s.id+1),s.next=o,this.tail=o):(o=new G(null,null,t,0),this.head=o,this.tail=o),this.current=o,o}back(){return this.current===this.head?!1:(this.current=this.current.prev,this.current)}forward(){return this.current===this.tail?!1:(this.current=this.current.next,this.current)}compareToCurrentPosition(t){if(t===this.current)return"equal";let o=this.head;for(;o;){if(this.current===o)return"behind";if(t===o)return"front";o=o.next}return!1}destroy(){this.head=null,this.tail=null,this.current=null}}const ni=e=>new Set(e.map(t=>t.id));class ai extends ii{constructor(o){super();u(this,"editor");this.editor=o,this.init()}init(){var o,s;this.append({type:"init",modules:[],selectModules:new Set}),(s=(o=this.editor.events).onHistoryUpdated)==null||s.call(o,this)}add(o){var s,l;super.detach(),super.append(o),(l=(s=this.editor.events).onHistoryUpdated)==null||l.call(s,this)}undo(o=!1){var a,c;const s=this.current;if(!s)return!1;const{type:l,modules:i=[],selectModules:r=new Set}=s.data;return l==="pasteModules"||l==="addModules"||l==="duplicateModules"?this.editor.batchDelete(ni(i)):l==="deleteModules"?this.editor.batchAdd(this.editor.batchCreate(i)):l==="modifyModules"&&(console.log("modify",i),this.editor.batchReplaceModules(i)),o||(this.editor.selectionManager.replace(r),(c=(a=this.editor.events).onHistoryUpdated)==null||c.call(a,this)),super.back(),this.current}redo(o=!1){var a,c;const s=super.forward();if(!s)return!1;const{type:l,modules:i=[],selectModules:r=new Set}=s.data;return l==="pasteModules"||l==="addModules"||l==="duplicateModules"?this.editor.batchAdd(this.editor.batchCreate(i)):l==="deleteModules"?this.editor.batchDelete(new Set(i.map(d=>d.id))):l==="modifyModules"&&this.editor.batchReplaceModules(i),o||(this.editor.selectionManager.replace(r),(c=(a=this.editor.events).onHistoryUpdated)==null||c.call(a,this)),this.current}moveCurrentById(o){var l,i;const s=super.compareToCurrentPosition(o);if(!(!s||s==="equal")&&(s==="front"||s==="behind")){let a;for(;s==="front"?a=this.undo(!0):s==="behind"&&(a=this.redo(!0)),a!==o;);const{selectModules:c}=o.data;this.editor.selectionManager.replace(c),(i=(l=this.editor.events).onHistoryUpdated)==null||i.call(l,this)}}toArray(){const o=[];if(this.head){let s=this.head;for(o.push(s);s.next;)o.push(s.next),s=s.next}return o}}class oe{constructor({id:t,type:o,lineColor:s,lineWidth:l=1,opacity:i=100,layer:r=1,rotation:a=0,shadow:c=!1,enableLine:d=!0}){u(this,"id");u(this,"type");u(this,"enableLine");u(this,"lineWidth");u(this,"lineColor");u(this,"opacity");u(this,"rotation");u(this,"shadow");u(this,"layer");this.id=t,this.type=o,this.enableLine=d,this.lineColor=s,this.lineWidth=l,this.opacity=i,this.rotation=a,this.shadow=c,this.layer=r}getDetails(){return{id:this.id,type:this.type,enableLine:this.enableLine,lineColor:this.lineColor,lineWidth:this.lineWidth,opacity:this.opacity,shadow:this.shadow,layer:this.layer,rotation:this.rotation}}getBoundingRect(){return{x:0,y:0,width:0,height:0,top:0,left:0,right:0,bottom:0,cx:0,cy:0}}}const ri=({x:e,y:t,width:o,height:s},l)=>{const i=e+o/2,r=t+s/2,a=l*Math.PI/180,c=Math.cos(a),d=Math.sin(a),h=Math.abs(o*c)+Math.abs(s*d),p=Math.abs(o*d)+Math.abs(s*c),f=i-h/2,g=r-p/2;return Y({x:f,y:g,width:h,height:p})},Y=e=>{const{x:t,y:o,width:s,height:l}=e;return{x:t,y:o,width:s,height:l,top:o,bottom:o+l,left:t,right:t+s,cx:t+s/2,cy:o+l/2}},Z=(e,t)=>{const o=Math.min(e.x,t.x),s=Math.max(e.x,t.x),l=Math.min(e.y,t.y),i=Math.max(e.y,t.y);return Y({x:o,y:l,width:s-o,height:i-l})};function ci(e,t){return!(e.right<t.left||e.left>t.right||e.bottom<t.top||e.top>t.bottom)}function di(e,t){return e.left>=t.left&&e.right<=t.right&&e.top>=t.top&&e.bottom<=t.bottom}const hi=({x:e,y:t},o,s)=>{const{x:l,y:i,width:r,height:a}=o;if(r<=0||a<=0)return!1;if(s===0){const v=r/2,w=a/2;return e>=l-v&&e<=l+v&&t>=i-w&&t<=i+w}const c=s*(Math.PI/180),d=Math.cos(c),h=Math.sin(c),p=e-l,f=t-i,g=p*d+f*h,x=-p*h+f*d,m=r/2,y=a/2;return g>=-m&&g<=m&&x>=-y&&x<=y},P=e=>e===0&&1/e===-1/0;class ui extends oe{constructor({x:o,y:s,fillColor:l,enableFill:i=!0,width:r,height:a,...c}){super(c);u(this,"x");u(this,"y");u(this,"width");u(this,"height");u(this,"fillColor");u(this,"enableFill");this.x=o,this.y=s,this.width=r,this.height=a,this.fillColor=l,this.enableFill=i}getDetails(){return{...this.getSize(),fillColor:this.fillColor,enableFill:this.enableFill,x:this.x,y:this.y,width:this.width,height:this.height,...super.getDetails()}}getSize(){return{width:0,height:0}}getBoundingRect(){const{x:o,y:s,width:l,height:i,rotation:r}=this,a=o-l/2,c=s-i/2;return r===0?{x:a,y:c,width:l,height:i,left:a,top:c,right:a+l,bottom:c+i,centerX:o,centerY:s}:ri({x:a,y:c,width:l,height:i},r)}}class pi extends ui{constructor({...t}){super(t)}getDetails(){return super.getDetails()}getBoundingRect(){return super.getBoundingRect()}}function I(e,t={}){if(typeof e!="object"||e===null)return e;if(Array.isArray(e))return e.map(s=>I(s,t));const o=Object.create(t.clonePrototype?Object.getPrototypeOf(e):null);for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(o[s]=I(e[s],t));return o}class fi{constructor(t){u(this,"lock");u(this,"editor");u(this,"eventsMap",new Map([["selectAll",[]],["copy",[]],["paste",[]],["duplicate",[]],["delete",[]],["escape",[]],["modifyModules",[]],["undo",[]],["redo",[]]]));this.editor=t,this.lock=!1}subscribe(t,o){this.eventsMap.has(t)?this.eventsMap.get(t).push(o):this.eventsMap.set(t,[o])}unsubscribe(t,o){if(this.eventsMap.has(t)){const s=this.eventsMap.get(t);for(let l=s.length-1;l>=0;l--)if(s[l]===o)return s.splice(l,1),"deleted";return"Cannot find event or function"}}dispatcher(t,o){if(!this.lock){switch(this.lock=!0,t){case"selectAll":this.editor.selectionManager.selectAll();break;case"select":this.editor.selectionManager.replace(o);break;case"copy":this.editor.selectionManager.copySelected();break;case"delete":this.editor.selectionManager.removeSelected();break;case"duplicate":this.editor.selectionManager.duplicateSelected();break;case"escape":this.editor.selectionManager.clear();break;case"paste":this.editor.selectionManager.pasteCopied();break;case"redo":this.editor.history.redo();break;case"undo":this.editor.history.undo();break;case"zoom":this.editor.viewport.zoomTo(o);break;case"moveUp":case"moveRight":case"moveDown":case"moveLeft":const s=this.editor.selectionManager.getSelected();this.editor.batchModify(s,{code:t},"modifyModules");break;default:console.warn(`Unknown code: ${t}`)}this.eventsMap.has(t)&&this.eventsMap.get(t).forEach(s=>{s()}),this.lock=!1}}destroy(){this.eventsMap.clear(),this.editor=null,this.lock=!1}}class bi extends oe{constructor({start:o,end:s,...l}){super(l);u(this,"start");u(this,"end");this.start=o,this.end=s}getDetails(){return{...this.getSize(),...super.getDetails()}}getSize(){return{width:100,height:100}}getBoundingRect(){const{x:o,y:s}={x:0,y:1},{width:l,height:i}=this.getSize();return{x:o,y:s,width:l,height:i,top:s,left:o,right:o+l,bottom:s+i}}}function gi(e){var o,s;this.batchCreate(e).forEach(l=>{console.log(this.moduleMap),this.moduleMap.set(l.id,l)}),this.render(),(s=(o=this.events).onModulesUpdated)==null||s.call(o,this.moduleMap),this.selectionManager.render()}const se=e=>{if(!Array.isArray(e))return[];const t=new Set;return e.filter(o=>{const s=Object.keys(o).sort().map(l=>`${l}:${String(o[l])}`).join(";");return t.has(s)?!1:(t.add(s),!0)})},le=(e,t)=>{let o=t;o.length>1e3&&(o=t.map(l=>({...l,x:Math.floor(l.x),y:Math.floor(l.y)})));const s=se(o);e.save(),s.forEach(({x:l,y:i,width:r,height:a,fillColor:c="",lineColor:d="",lineWidth:h=1,radius:p=0,opacity:f=100,gradient:g,rotation:x=0,dashLine:m=""})=>{const y=r/2,v=a/2;e.save(),e.translate(l,i),x>0&&e.rotate(x*Math.PI/180),f>0&&(e.fillStyle=c,e.globalAlpha=f/100),h>0&&(e.lineWidth=h,e.strokeStyle=d,e.lineJoin="round"),e.beginPath(),m&&e.setLineDash([3,5]),p>0?(e.moveTo(-y+p,-v),e.arcTo(y,-v,y,v,p),e.arcTo(y,v,-y,v,p),e.arcTo(-y,v,-y,-v,p),e.arcTo(-y,-v,y,-v,p)):e.rect(-y,-v,r,a),e.closePath(),f>0&&e.fill(),h>0&&e.stroke(),e.restore()})},mi=(e,t)=>{const o=new Set,s=",";e.save(),t.forEach(a=>{const c=Object.values(a).join(s);o.add(c)});let l=NaN,i="";const r=new Path2D;o.forEach(a=>{const c=a.split(s),d=parseFloat(c[0]),h=parseFloat(c[1]),p=parseFloat(c[2]),f=parseFloat(c[3]),g=c[4],x=parseFloat(c[5]);x!==l&&(e.lineWidth=x,l=x),g!==i&&(e.fillStyle=g,i=g),r.moveTo(d,h),r.lineTo(p,f)}),e.stroke(r),e.restore()},xi=({ctx:e,modules:t,frame:o})=>{const l=[{...o,x:o.cx,y:o.cy}],i=[],r=[];t.forEach(a=>{if(a.type==="rectangle"){const{x:c,y:d,width:h,height:p,enableFill:f,enableLine:g,opacity:x,lineWidth:m,fillColor:y,lineColor:v,rotation:w,gradient:N,radius:j,id:F}=a.getDetails();(f&&x>0||g)&&l.push({x:c,y:d,width:h,height:p,fillColor:y,opacity:x,lineWidth:m,lineColor:v,rotation:w,gradient:N,radius:j}),r.push({x:c+10,y:d+10,width:h,height:p,id:F.match(/\d+$/g)[0]})}if(a.type==="connector"){const c=t.get(a.start),d=t.get(a.end),h=c.getBoundingRect(),p=d.getBoundingRect();i.push({startX:h.centerX,startY:h.bottom,endX:p.centerX,endY:p.top,fillStyle:"#5491f8",lineWidth:1})}}),le(e,l),mi(e,i),yi(e,r)},yi=(e,t)=>{e.font="sans-serif",e.textBaseline="top",t.forEach(({id:o,x:s,y:l,width:i,height:r})=>{e.fillText(o,s-i/2+5,l-r/2+5,100)})};function vi(){const e="#1FB3FF",t="rgba(31,180,255,0.1)";this.editor.container.innerHTML="",this.mainCanvas.setAttribute("editor-main-canvas",""),this.mainCanvas.style.backgroundColor="#f0f0f0",this.mainCanvas.style.position="absolute",this.mainCanvas.style.left="0",this.mainCanvas.style.top="0",this.mainCanvas.style.width="100%",this.mainCanvas.style.height="100%",this.mainCanvas.style.pointerEvents="none",this.selectionCanvas.setAttribute("editor-selection-canvas",""),this.selectionCanvas.style.position="absolute",this.selectionCanvas.style.left="0",this.selectionCanvas.style.top="0",this.selectionCanvas.style.width="100%",this.selectionCanvas.style.height="100%",this.selectionCanvas.style.pointerEvents="none",this.wrapper.setAttribute("editor-wrapper",""),this.wrapper.style.userSelect="none",this.wrapper.style.position="relative",this.wrapper.style.scrollbarWidth="thin",this.wrapper.style.scrollbarColor="#787878 transparent",this.wrapper.style.overflow="hidden",this.wrapper.style.width="100%",this.wrapper.style.height="100%",this.selectionBox.setAttribute("editor-selection-box",""),this.selectionBox.style.pointerEvents="none",this.selectionBox.style.position="absolute",this.selectionBox.style.border="1px solid "+e,this.selectionBox.style.backgroundColor=t,ie(this.scrollBarX,this.scrollBarY),H(this.selectionBox,{x:0,y:0,width:0,height:0},!1),this.wrapper.append(this.mainCanvas,this.selectionCanvas,this.scrollBarX,this.scrollBarY,this.selectionBox),this.editor.container.appendChild(this.wrapper)}const wi=()=>{const e=document.createElement("div"),t=document.createElement("div");return e.setAttribute("scroll-bar-x",""),t.setAttribute("scroll-bar-y",""),e.style.backgroundColor="#787878",t.style.backgroundColor="#787878",e.style.userSelect="none",t.style.userSelect="none",t.style.translate="none",t.style.translate="none",{scrollBarX:e,scrollBarY:t}},ie=(e,t)=>{e.style.width="50px",e.style.height="6px",e.style.position="absolute",e.style.bottom="0",e.style.left="0",t.style.width="6px",t.style.height="50px",t.style.position="absolute",t.style.right="0",t.style.top="0"},H=(e,{x:t,y:o,height:s,width:l},i=!0)=>{e.style.transform=`translate(${t}px, ${o}px)`,e.style.width=l+"px",e.style.height=s+"px",e.style.display=i?"block":"none"};function Ci(e){const t=e.target===this.wrapper,o=e.button===0;if(!(!t||!o||this.domResizing))if(this.mouseDownPoint.x=e.clientX-this.rect.x,this.mouseDownPoint.y=e.clientY-this.rect.y,this.spaceKeyDown)this.manipulationStatus="panning";else if(this.hoveredModules.size>0){const s=[...this.hoveredModules][this.hoveredModules.size-1];this.editor.selectionManager.isSelectAll?this.editor.moduleMap.forEach(l=>{this.handlingModules.add(l.id)}):this.editor.selectionManager.selectedModules.has(s)?this.editor.selectionManager.selectedModules.forEach(l=>{this.handlingModules.add(l)}):this.handlingModules.add(s)}else this.manipulationStatus="selecting",e.ctrlKey||e.shiftKey||e.metaKey||this.editor.selectionManager.clear()}function Mi(e){if(!this.domResizing)switch(this.mouseMovePoint.x=e.clientX-this.rect.x,this.mouseMovePoint.y=e.clientY-this.rect.y,this.hoveredModules.clear(),this.drawCrossLine=!1,this.manipulationStatus){case"selecting":this.wrapper.setPointerCapture(e.pointerId);const t=Z(this.mouseDownPoint,this.mouseMovePoint),o=this.screenToCanvas(t.x,t.y),s=this.screenToCanvas(t.x+t.width,t.y+t.height),l=Z(o,s);let i=new Set;this.editor.visibleModuleMap.forEach(h=>{if(h.type==="rectangle"){const p=h.getBoundingRect();di(p,l)&&i.add(h.id)}}),e.ctrlKey||e.shiftKey||e.metaKey?this.editor.selectionManager.toggle(i):this.editor.selectionManager.replace(i),H(this.selectionBox,t),this.resetSelectionCanvas(),this.renderSelectionCanvas();break;case"panning":this.translateViewport(e.movementX,e.movementY);break;case"dragging":this.wrapper.setPointerCapture(e.pointerId);const r=e.movementX*this.dpr/this.scale,a=e.movementY*this.dpr/this.scale;this.handlingModules.forEach(h=>{this.editor.moduleMap.get(h).x+=r,this.editor.moduleMap.get(h).y+=a}),this.render();break;case"resizing":break;case"rotating":break;case"static":const c=10,d=Math.abs(this.mouseMovePoint.x-this.mouseDownPoint.x)>c||Math.abs(this.mouseMovePoint.y-this.mouseDownPoint.y)>c;if(this.handlingModules.size>0&&d)this.manipulationStatus="dragging";else{const h=this.screenToCanvas(this.mouseMovePoint.x,this.mouseMovePoint.y);this.editor.visibleModuleMap.forEach(p=>{if(p.type==="rectangle"){const{x:f,y:g,width:x,height:m,rotation:y}=p;hi(h,{x:f,y:g,width:x,height:m},y)&&this.hoveredModules.add(p.id)}}),this.wrapper.releasePointerCapture(e.pointerId),this.drawCrossLine=!0,this.updateVirtualRect(),this.resetSelectionCanvas(),this.renderSelectionCanvas()}break}}function Si(e){const t=e.clientX-this.rect.x,o=e.clientY-this.rect.y;switch(this.mouseMovePoint.x=t,this.mouseMovePoint.y=o,this.manipulationStatus){case"selecting":this.resetSelectionCanvas(),this.renderSelectionCanvas();break;case"panning":break;case"dragging":this.editor.selectionManager.replace(this.handlingModules);break;case"resizing":break;case"rotating":break;case"static":e.ctrlKey||e.metaKey||e.shiftKey?this.editor.selectionManager.toggle(this.handlingModules):this.editor.selectionManager.replace(this.handlingModules);break}this.handlingModules.clear(),this.manipulationStatus="static",H(this.selectionBox,{x:0,y:0,width:0,height:0},!1)}function Ni(e){if(!(this.manipulationStatus==="panning"||this.manipulationStatus==="selecting")&&e.code==="Space"){this.spaceKeyDown=!0,this.wrapper.style.cursor="grabbing",e.preventDefault();return}}function ji(e){e.code==="Space"&&(this.spaceKeyDown=!1,this.wrapper.style.cursor="default")}function Fi(e){if(e.target!==this.wrapper)return;e.preventDefault(),e.stopPropagation();const{zooming:t,panning:o,scrolling:s,zoomFactor:l,translateX:i,translateY:r}=$i(e);this.zooming=t,t?(console.log(l),this.zoomAtPoint(this.mouseMovePoint,l)):(o||s)&&this.translateViewport(i,r),this.updateVirtualRect()}const $i=(()=>{let e;const s=[];let l=!1,i=!1,r=!1,a=0,c=0,d=0,h=!1;return p=>{const{deltaX:f,deltaY:g,altKey:x}=p;if(e&&clearTimeout(e),h?s.length=0:s.push(p),c=0,d=0,l=!1,r=!1,i=!1,x&&(l=!0),s.length>=3){const m=s.every(w=>P(w.deltaX)),y=s.every(w=>O(w.deltaY)),v=s.every(w=>Math.abs(w.deltaY)>4);m&&y&&!v&&(h=!0,console.log("touchpadZoomingLock"))}return h?(a=g>0?-.01:.01,l=!0):Math.abs(f)>=40&&P(g)?x?a=f<0?.01:-.01:(r=!0,c=-f):P(f)&&O(g)&&Math.abs(g)>4?x?a=g<0?.01:-.01:(r=!0,d=-g):q(f)&&q(g)&&(x?a=(Math.abs(f)>Math.abs(g)?f:g)<0?.01:-.01:(i=!0,c=-f,d=-g)),e=setTimeout(()=>{h=!1,l=!1,i=!1,r=!1,a=0,c=0,d=0,s.length=0},200),{zooming:l,panning:i,scrolling:r,zoomFactor:a,translateX:c,translateY:d}}})();function q(e){return!O(e)}function O(e){return Math.abs(e)%1!==0}function Ei(e){const t="editor-contextmenu-dom",o=document.createElement("div"),s=()=>{window.removeEventListener("mousedown",s),o.remove()};window.addEventListener("mousedown",s),o.dataset.name=t,o.style.position="fixed",o.style.top=e.clientY+"px",o.style.left=e.clientX+"px",o.style.backgroundColor="#dfdfdf",o.style.padding="10px 10px",o.style.width="200px",o.style.height="auto",o.style.boxShadow="rgb(194 194 194) 0px 0px 1px 1px",o.innerHTML=`
    <div>
      <div>Undo</div>
      <div>Redo</div>
      <div>Paste</div>
      <div>Select All</div>
    </div>
  `,this.wrapper.append(o),e.preventDefault(),e.stopPropagation()}const Q=(e,t,o,{x:s,y:l})=>{const i=[o,0,0,o,s*t,l*t];e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,e.canvas.width*2,e.canvas.height*2),e.setTransform(...i)},ki=(e,t)=>{let o=t;o.length>1e3&&(o=t.map(l=>({...l,x:Math.floor(l.x),y:Math.floor(l.y)})));const s=se(o);e.save(),s.forEach(({x:l,y:i,r1:r,r2:a,fillColor:c="",lineColor:d="",lineWidth:h=1,opacity:p=100,gradient:f,rotation:g=0,dashLine:x=""})=>{e.save(),e.translate(l,i),g!==0&&e.rotate(g*Math.PI/180),p>0&&(e.fillStyle=c,e.globalAlpha=p/100),h>0&&(e.lineWidth=h,e.strokeStyle=d,e.lineJoin="round"),e.beginPath(),e.ellipse(0,0,r,a,0,0,Math.PI*2),x?e.setLineDash([3,5]):e.setLineDash([]),e.closePath(),p>0&&e.fill(),h>0&&e.stroke(),f&&(e.fillStyle=f,p>0&&e.fill()),e.restore()})},Li=(e,t,o,s,l)=>{const i=o/2,r=s/2,a=l*(Math.PI/180),c=Math.cos(a),d=Math.sin(a);return[{x:e-i,y:t-r},{x:e,y:t-r},{x:e+i,y:t-r},{x:e+i,y:t},{x:e+i,y:t+r},{x:e,y:t+r},{x:e-i,y:t+r},{x:e-i,y:t}].map(({x:p,y:f})=>{const g=p-e,x=f-t;return{x:e+g*c-x*d,y:t+g*d+x*c}})};function ne(e,t,o,s,l){return{x:(s-t)/e,y:(l-o)/e}}const Ti=({ctx:e,mousePoint:t,scale:o,dpr:s,offset:{x:l,y:i},virtualRect:{left:r,top:a,right:c,bottom:d}})=>{const h=10/(s*o),p=10/(s*o),{x:f,y:g}=ne(o,l*s,i*s,t.x*s,t.y*s),x="#ff0000",m="#ff0000",y="#000";e.save(),e.textBaseline="alphabetic",e.font=`${24/o}px sans-serif`,e.fillStyle=m,e.shadowColor=x,e.shadowBlur=1,e.fillText(`${Math.floor(f)}, ${Math.floor(g)}`,f+h,g-p,200/o),e.lineWidth=2/(s*o),e.strokeStyle=x,e.shadowColor=y,e.shadowBlur=0,e.beginPath(),e.moveTo(r,g),e.lineTo(c,g),e.moveTo(f,a),e.lineTo(f,d),e.stroke(),e.restore()};function Ai(){const{selectionCTX:e,editor:t,dpr:o,offset:s,virtualRect:l,scale:i,mouseMovePoint:r}=this,{selectionManager:a}=t;a.selectedModules.size;const c=d=>{const h=a.resizeHandleSize/2,p=[],f=[],g="#5491f8",x="#5491f8";d.forEach(m=>{const{x:y,y:v,width:w,height:N,rotation:j,lineWidth:F}=m.getDetails(),D=Li(y,v,w,N,j);f.push(...D.map(R=>({...R,r1:h,r2:h,fillColor:g,lineColor:"#fff"}))),p.push({x:y,y:v,width:w,height:N,fillColor:g,lineColor:x,lineWidth:F,rotation:j,opacity:0,dashLine:"dash"})}),le(e,p),ki(e,f),this.enableCrossLine&&this.drawCrossLine&&Ti({ctx:e,mousePoint:r,scale:i,dpr:o,offset:s,virtualRect:l})};if(a.isSelectAll)c(a.editor.visibleModuleMap);else{const d=new Map;a.selectedModules.forEach(h=>{a.editor.visibleModuleMap.forEach(p=>{p.id===h&&d.set(p.id,p)})}),c(d)}}const Di=(e,t)=>{const{width:o,height:s}=t,{width:l,height:i}=e,r=.98,a=o/l,c=s/i,d=Math.min(a,c)*r,h=((o-l*d)/2-e.x*d)/2,p=((s-i*d)/2-e.y*d)/2;return{scale:d,offsetX:h,offsetY:p}},Ri=(e="A4")=>{let t=0,o=0;const s=0,l=0;if(e==="A4"||e==="A4L"){const r=1.414142857;e==="A4L"?(o=1e3,t=r*o):(t=1e3,o=r*t)}else e==="photo1"&&(t=35,o=55);return{...Y({x:s,y:l,width:t,height:o}),opacity:100,lineWidth:1,lineColor:"#000000",fillColor:"#fff"}},zi=(e,t,o,s)=>({x:e,y:t,width:o,height:s,left:e,top:t,right:e+o,bottom:t+s,cx:e+o/2,cy:t+s/2});class Pi{constructor(t){u(this,"editor");u(this,"resizeInterval",17);u(this,"resizeObserver");u(this,"wrapper");u(this,"scrollBarX");u(this,"scrollBarY");u(this,"selectionBox");u(this,"selectionCanvas");u(this,"selectionCTX");u(this,"mainCanvas");u(this,"mainCTX");u(this,"eventsController");u(this,"initialized",!1);u(this,"dpr",2);u(this,"spaceKeyDown",!1);u(this,"hoveredModules",new Set);u(this,"handlingModules",new Set);u(this,"zooming",!1);u(this,"manipulationStatus","static");u(this,"frame",Ri("A4"));u(this,"mouseDownPoint",{x:0,y:0});u(this,"mouseMovePoint",{x:0,y:0});u(this,"offset",{x:0,y:0});u(this,"rect");u(this,"virtualRect",{x:0,y:0,width:0,height:0,top:0,right:0,bottom:0,left:0,cx:0,cy:0});u(this,"domResizing",!1);u(this,"resizeTimeout");u(this,"scale",1);u(this,"enableCrossLine",!0);u(this,"drawCrossLine",!1);const{scrollBarX:o,scrollBarY:s}=wi(),l=document.createElement("canvas"),i=document.createElement("canvas"),r=l.getContext("2d"),a=i.getContext("2d");this.selectionCanvas=l,this.mainCanvas=i,this.selectionCTX=r,this.mainCTX=a,this.editor=t,this.scrollBarX=o,this.scrollBarY=s,this.selectionBox=document.createElement("div"),this.wrapper=document.createElement("div"),this.resizeThrottle=this.resizeThrottle.bind(this),this.resizeObserver=new ResizeObserver(this.resizeThrottle),this.updateCanvasSize=this.updateCanvasSize.bind(this),this.eventsController=new AbortController,this.init()}init(){this.updateCanvasSize(),vi.call(this),this.resizeObserver.observe(this.editor.container),this.setupEvents()}setupEvents(){const{signal:t}=this.eventsController;window.addEventListener("mousedown",Ci.bind(this),{signal:t}),window.addEventListener("mouseup",Si.bind(this),{signal:t}),window.addEventListener("keydown",Ni.bind(this),{signal:t}),window.addEventListener("keyup",ji.bind(this),{signal:t}),window.addEventListener("wheel",Fi.bind(this),{signal:t,passive:!1}),this.wrapper.addEventListener("pointermove",Mi.bind(this),{signal:t}),this.wrapper.addEventListener("contextmenu",Ei.bind(this),{signal:t})}updateVirtualRect(){var d,h;const{x:t,y:o}=this.screenToCanvas(0,0),{x:s,y:l}=this.screenToCanvas(this.rect.width,this.rect.height),{x:i,y:r}=this.screenToCanvas(this.mouseMovePoint.x,this.mouseMovePoint.y),a=s-t,c=l-o;this.virtualRect={x:t,y:o,width:a,height:c,cx:t+a/2,cy:o+c/2,top:o,right:s,bottom:l,left:t},this.editor.updateVisibleModuleMap(this.virtualRect),(h=(d=this.editor.events).onViewportUpdated)==null||h.call(d,{offsetX:this.offset.x,offsetY:this.offset.y,scale:this.scale,dx:i,dy:r,status:this.manipulationStatus,width:a,height:c})}zoomAtPoint(t,o,s=!1){const{offset:l,scale:i,dpr:r}=this,a=.1,c=5;let d=i+o;const h=t.x*i,p=t.y*i,f={x:0,y:0,width:this.rect.width*r,height:this.rect.height*r};if(console.log(h,p,f),s&&(d=o),d<a||d>c)return;const g=Math.max(a,Math.min(c,d)),x=g/i,m=this.screenToCanvas(t.x,t.y),y=m.x-(m.x-l.x)*x,v=m.y-(m.y-l.y)*x;this.scale=g,this.offset.x=y,this.offset.y=v,this.render(),this.updateVirtualRect()}zoomTo(t){console.log(t),t==="fit"?this.fitFrame():this.zoomAtPoint({x:this.rect.width/2,y:this.rect.height/2},t,!0)}setTranslateViewport(t,o){this.offset.x=0,this.offset.y=0,this.translateViewport(t,o)}translateViewport(t,o){this.offset.x+=t,this.offset.y+=o,this.updateVirtualRect(),this.render()}updateScrollBar(){const{scrollBarX:t,scrollBarY:o}=this;ie(t,o)}resizeThrottle(){clearTimeout(this.resizeTimeout),this.domResizing=!0,this.resizeTimeout=setTimeout(this.onResize.bind(this),this.resizeInterval)}onResize(){this.domResizing=!1,this.updateCanvasSize(),this.updateVirtualRect(),this.render(),this.initialized||(this.initialized=!0,this.fitFrame())}updateCanvasSize(){this.rect=this.editor.container.getBoundingClientRect(),this.mainCanvas.width=this.rect.width*this.dpr,this.mainCanvas.height=this.rect.height*this.dpr,this.selectionCanvas.width=this.rect.width*this.dpr,this.selectionCanvas.height=this.rect.height*this.dpr}screenToCanvas(t,o){const{dpr:s,offset:l,scale:i}=this;return ne(i,l.x*s,l.y*s,t*s,o*s)}fitFrame(){const{dpr:t,frame:o,rect:s}=this,l=zi(0,0,s.width*t,s.height*t),{scale:i,offsetX:r,offsetY:a}=Di(o,l);this.scale=i,this.offset.x=r,this.offset.y=a,this.render(),this.updateVirtualRect()}resetMainCanvas(){Q(this.mainCTX,this.dpr,this.scale,this.offset)}resetSelectionCanvas(){Q(this.selectionCTX,this.dpr,this.scale,this.offset)}renderMainCanvas(){requestAnimationFrame(()=>{xi({ctx:this.mainCTX,frame:this.frame,modules:this.editor.visibleModuleMap})})}renderSelectionCanvas(){requestAnimationFrame(()=>{Ai.call(this)})}render(){this.resetMainCanvas(),this.resetSelectionCanvas(),this.renderMainCanvas(),this.renderSelectionCanvas()}destroy(){clearTimeout(this.resizeTimeout),this.resizeObserver.disconnect(),this.eventsController.abort(),this.wrapper.style.width="100%",this.wrapper.style.height="100%",this.wrapper.remove(),this.editor.container.innerHTML=""}}class Bi{constructor({container:t,data:o,dpr:s=2,zoom:l=1,events:i={}}){u(this,"moduleCounter",0);u(this,"moduleMap");u(this,"visibleModuleMap");u(this,"id");u(this,"dpr");u(this,"container");u(this,"events",{});u(this,"action");u(this,"history");u(this,"selectionManager");u(this,"viewport");u(this,"zoom");u(this,"scale",1);this.moduleMap=o.modules.reduce((r,a)=>(r.set(a.id,a),r),new Map),this.visibleModuleMap=new Map,this.id=o.id,this.scale=s,this.events=i,this.container=t,this.viewport=new Pi(this),this.action=new fi(this),this.selectionManager=new li(this),this.history=new ai(this)}createModuleId(){return this.id+"-"+ ++this.moduleCounter}batchCreate(t){const o=I(t),s=new Map,l=i=>{if(i.id||(i.id=this.createModuleId()),i.type==="rectangle")return new pi(i);if(i.type==="connector")return new bi(i)};return o.forEach(i=>{const r=l.call(this,i);s.set(i.id,r)}),s}batchAdd(t,o){var s,l;if(t.forEach(i=>{this.moduleMap.set(i.id,i)}),o){const i=[...t.values()].map(r=>r.getDetails());this.history.add({type:o,modules:i,selectModules:new Set(i.map(r=>r.id))})}this.updateVisibleModuleMap(this.viewport.virtualRect),(l=(s=this.events).onModulesUpdated)==null||l.call(s,this.moduleMap),this.render()}batchCopy(t,o=!1,s){const l=[];let i=new Map;return t==="all"?i=this.moduleMap:E(t)==="set"&&t.forEach(r=>{const a=this.moduleMap.get(r);a&&i.set(r,a)}),i.forEach(r=>{const a=r.getDetails();o&&delete a.id,E(s)==="object"&&Object.assign(a,s),l.push(a)}),l}batchDelete(t,o){var l,i;let s=[];return t==="all"?(s=this.batchCopy("all"),this.moduleMap.clear()):E(t)==="set"&&(s=this.batchCopy(t),s.forEach(r=>{this.moduleMap.delete(r.id)})),o&&this.history.add({type:o,modules:s,selectModules:this.selectionManager.getSelected()}),this.updateVisibleModuleMap(this.viewport.virtualRect),this.render(),(i=(l=this.events).onModulesUpdated)==null||i.call(l,this.moduleMap),s}batchModify(t,o,s){var r,a,c,d;let l=null;const i=5;if(t==="all")l=this.moduleMap;else if(E(t)==="set")l=this.getModulesByIdSet(t);else return!1;l.forEach(h=>{Object.keys(o).forEach(p=>{const f=o.code,g=o[p];f==="moveUp"?h.y-=i:f==="moveDown"?h.y+=i:f==="moveLeft"?h.x-=i:f==="moveRight"?h.x+=i:(typeof g=="string"||typeof g=="number")&&(h[p]=g)})}),this.render(),(a=(r=this.events).onModulesUpdated)==null||a.call(r,this.moduleMap),(d=(c=this.events).onSelectionUpdated)==null||d.call(c,this.selectionManager.selectedModules,this.selectionManager.getIfUnique()),s&&this.history.add({type:s,modules:[...l.values()].map(h=>h.getDetails()),selectModules:this.selectionManager.getSelected()})}batchReplaceModules(t){gi.bind(this,t)}getModulesByLayerIndex(){}getModulesByIdSet(t){const o=new Map;return t.forEach(s=>{const l=this.moduleMap.get(s);l&&o.set(s,l)}),o}getModuleList(){return[...Object.values(this.moduleMap)]}updateVisibleModuleMap(t){this.visibleModuleMap.clear(),this.moduleMap.forEach(o=>{const s=o.getBoundingRect();ci(s,t)&&this.visibleModuleMap.set(o.id,o)})}execute(t,o=null){this.action.dispatcher(t,o)}render(){this.viewport.render()}destroy(){this.action.destroy(),this.selectionManager.destroy(),this.history.destroy(),this.viewport.destroy(),this.moduleMap.clear(),this.action=null,this.selectionManager=null,this.crossLine=null,this.history=null,this.moduleMap=null,this.canvas=null,this.ctx=null,this.dpr=null,this.zoom=null,this.id=null,this.events=null,this.container=null}}const S=b.createContext({focused:!1,historyArray:[],historyCurrent:{},selectedModules:[],selectedProps:{},editorRef:{},applyHistoryNode:()=>{},executeAction:()=>{},viewport:{width:0,height:0,offsetX:0,offsetY:0,scale:1,dx:0,dy:0,status:""}}),Ii=()=>{const{executeAction:e,focused:t}=b.useContext(S),o=s=>{let l=null;const{key:i,ctrlKey:r,metaKey:a,shiftKey:c}=s,d={ArrowUp:"moveUp",ArrowDown:"moveDown",ArrowLeft:"moveLeft",ArrowRight:"moveRight"};i==="a"&&(r||a)&&(l="selectAll"),i==="c"&&(r||a)&&!c&&(l="copy"),i==="v"&&(r||a)&&(l="paste"),i==="d"&&(r||a)&&(l="duplicate"),(i==="Delete"||i==="Backspace")&&(l="delete"),i==="Escape"&&(l="escape"),i==="z"&&(r||a)&&(l="undo"),i==="z"&&c&&(r||a)&&(l="redo"),d[i]&&(l=d[i]),l&&(e(l),s.stopPropagation(),s.preventDefault())};return b.useEffect(()=>{if(t)return window.addEventListener("keydown",o),()=>{window.removeEventListener("keydown",o)}},[t]),null},Oi=[{type:"rectangle",width:100,height:50},{type:"rectangle",width:100,height:50},{type:"rectangle",width:100,height:50},{type:"rectangle",width:100,height:50},{type:"rectangle",width:100,height:50},{type:"rectangle",width:100,height:50}],Ui=()=>{const{editorRef:e}=b.useContext(S);return b.useEffect(()=>{e.current&&console.log("editorRef.current updated:",e.current)},[e]),n.jsx("div",{className:"flex flex-wrap space-x-2 space-y-2",children:Oi.map((t,o)=>n.jsx("div",{className:"shrink-0 select-none cursor-move",style:{width:t.width,height:t.height,border:"1px solid #dfdfdf"},onMouseEnter:()=>{}},o))})},Xi=({className:e=""})=>{const[t,o]=b.useState(300),s=b.useRef(!1),l=b.useRef(null),i=b.useCallback(c=>{c.preventDefault(),s.current=!0,document.body.style.cursor="col-resize",document.body.style.userSelect="none"},[]),r=b.useCallback(c=>{if(!s.current)return;const d=window.innerWidth*.9,h=Math.min(Math.max(0,c.clientX),d);c.stopPropagation(),o(h)},[]),a=b.useCallback(c=>{s.current=!1,document.body.style.cursor="default",document.body.style.userSelect="",c.stopPropagation()},[]);return b.useEffect(()=>(window.addEventListener("mousemove",r),window.addEventListener("mouseup",a),()=>{window.removeEventListener("mousemove",r),window.removeEventListener("mouseup",a)}),[r,a]),n.jsxs("div",{ref:l,style:{width:`${t}px`},className:"relative h-full flex-shrink-0 border-r border-gray-200",children:[n.jsxs("div",{className:`h-auto p-6 bg-white overflow-hidden ${e}`,children:[n.jsx("span",{children:"Module List"}),n.jsx(Ui,{})]}),n.jsx("div",{className:"absolute z-10 top-0 -right-1 w-2 h-full bg-transparent hover:bg-gray-200 cursor-col-resize transition-colors",onMouseDown:i})]})},J=e=>(e*100).toFixed(2)+"%",Vi=e=>{const t=e.replace("%","").trim(),o=Number(t);return isNaN(o)?!1:Number(o.toFixed(2))},Yi=({scale:e,onChange:t})=>{const o=[{label:"400%",value:4},{label:"300%",value:3},{label:"200%",value:2},{label:"150%",value:1.5},{label:"125%",value:1.25},{label:"100%",value:1},{label:"75%",value:.75},{label:"50%",value:.5},{label:"25%",value:.25},{label:"Fit window",value:"fit"}],[s,l]=b.useState(J(1)),[i,r]=b.useState(!1),a=b.useRef(null);b.useEffect(()=>{const d=J(e);a.current&&(a.current.value=d),l(d)},[e]);const c=d=>{if(d.key==="Enter"){const h=Vi(d.target.value);h!==!1&&t(h),a.current.blur()}d.stopPropagation()};return n.jsxs("div",{className:"w-17 h-5 ml-2 flex justify-start items-center relative  focus:ring-blue-500 focus:ring-1",children:[n.jsx("input",{type:"text",ref:a,onChange:void 0,defaultValue:s,onKeyDown:c,className:"w-20 h-5 text-sm bg-gray-100 text-center overflow-hidden ",placeholder:"Enter zoom %"}),n.jsx("button",{onClick:()=>r(!i),className:"text-gray-800 flex trasition items-center cursor-pointer",children:i?n.jsx(me,{className:"w-5 h-5"}):n.jsx(xe,{className:"w-5 h-5"})}),i&&n.jsx("div",{className:"fixed w-full h-full",onClick:()=>{r(!1)}}),i&&n.jsx("div",{className:"absolute w-20 cursor-pointer py-2 left-0 bottom-5 bg-white shadow-lg max-h-40v overflow-y-auto z-10",children:o.map(({label:d,value:h})=>n.jsx("div",{onClick:()=>{r(!1),t(h)},className:"text-sm align-middle p-1 text-center hover:bg-blue-500 hover:text-white transition",children:h==="fit"?d:`${h*100}%`},h))})]})},Hi=({className:e=""})=>{const{viewport:t,executeAction:o}=b.useContext(S);return t?n.jsx("footer",{className:e+"w-full h-8 flex justify-between pr-1 items-center border-t border-gray-200",children:t&&n.jsxs(n.Fragment,{children:[n.jsx(Yi,{scale:t.scale,onChange:s=>{o("zoom",s)}},t.scale),n.jsx("div",{className:"text-xs line-clamp-1",children:`dx:${t.dx.toFixed(2)} dx:${t.dy.toFixed(2)}`})]})}):null},B=28,_i=({data:e,selected:t,handleSelectModule:o})=>{const s=b.useRef(null),l=b.useRef(null),[i,r]=b.useState(0),[a,c]=b.useState([0,10]);b.useEffect(()=>{},[t,e]);const d=()=>{if(!s.current)return;const p=s.current.scrollTop,f=p<i,g=Math.round(p/B),x=g+10;if(console.log(p),f){if(a[0]>=e.length-1)return}else if(a[1]>=e.length-1)return;r(p),c([g,x])},h=[];for(let p=a[0];p<a[1];p++){const f=e[p];f&&h.push(n.jsx("div",{ref:t!=null&&t.includes(f.id)?l:null,style:{height:B},className:t!=null&&t.includes(f.id)?"bg-gray-400 text-white":"",onClick:()=>o(f.id),id:`layer-module-${f.id}`,children:f.type},f.id))}return n.jsxs("div",{className:"p-2",children:[n.jsx("h1",{className:"bg-gray-400 text-white px-2",children:n.jsx("span",{children:"Layer"})}),n.jsx("div",{className:"p-2 relative overflow-hidden",children:n.jsxs("div",{ref:s,onScroll:d,className:"relative scrollbar-custom overflow-x-hidden overflow-y-auto p-2 border h-30 border-gray-200 select-none",children:[n.jsx("div",{className:"absolute w-full top-0 left-0",style:{height:e.length*B}}),n.jsx("div",{className:"w-full sticky top-0 left-0",children:h})]})})]})},ae=({menu:e})=>{const{t}=L(),[o,s]=b.useState(!1),{executeAction:l}=b.useContext(S),i=()=>{console.log(e.id),!(e.children||o)&&(l(e.id),s(!1))},r=e.children&&e.children.length>0;return n.jsxs("div",{className:"relative h-8 hover:bg-gray-200 min-w-50",onClick:()=>i(),onMouseOver:a=>{s(!0),a.preventDefault()},onMouseLeave:()=>{s(!1)},children:[n.jsxs("div",{className:"px-4 w-full h-full flex justify-between items-center whitespace-nowrap",children:[n.jsx("span",{children:t(e.id+".label")}),r&&n.jsx(ye,{size:18})]}),r&&o&&n.jsx("div",{className:"absolute bg-white z-30 left-full top-0 w-auto border border-gray-200 box-border",children:e.children.map(a=>n.jsx(ae,{menu:a},a.id))})]})},Ki=()=>{const[e,t]=b.useState(!1),[o,s]=b.useState(null),{t:l}=L(),i=b.useRef(null),r=te(c=>c.menu.actions),a=b.useMemo(()=>Wi(r),[r]);return b.useEffect(()=>{const c=d=>{i.current.contains(d.target)||(t(!1),s(null))};return window.addEventListener("click",c),()=>{window.removeEventListener("click",c)}}),n.jsx("div",{className:"h-8 text-sm select-none border-gray-200 box-border",children:n.jsx("div",{ref:i,className:"pl-2 h-full inline-flex",children:a.map(c=>{var d;return n.jsxs("div",{className:"relative h-full",children:[n.jsx("div",{className:`h-full inline-flex items-center px-4 ${c.id===o?"bg-gray-200":""}`,onMouseEnter:()=>e&&s(c.id),onClick:()=>{o!==c.id?(t(!0),s(c.id)):(s(null),t(!1))},title:l(c.id+".tooltip"),children:n.jsx("span",{children:l(c.id+".label")})}),e&&c.id===o&&c.children.length>0&&n.jsx("div",{className:"absolute z-20 bg-white border border-gray-200",children:(d=c.children)==null?void 0:d.map(h=>n.jsx(ae,{menu:h},h.id))})]},c.id)})})})};function Wi(e){const t=new Map;Object.values(e).forEach(s=>{t.set(s.id,{...s,children:[]})});const o=[];return t.forEach(s=>{const l=t.get(s.parent);l?l.children.push(s):o.push(s)}),o}const T={strokeWidth:"2",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"},A="#9b9a9a",Gi=({size:e=24,...t})=>n.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",...T,...t,children:[n.jsx("path",{fill:A,d:"M12,10.87l-9.06,5.67,9.06,5.67,9.06-5.67-9.06-5.67Z"}),n.jsx("path",{fill:"#fff",d:"M9.57,7.84c-2.21,1.38-4.42,2.76-6.64,4.15,3.02,1.89,6.04,3.78,9.06,5.67l9.06-5.67c-2.24-1.4-4.48-2.8-6.72-4.2"}),n.jsx("path",{d:"M11.96,1.8c.01,2.22.04,6.67.04,6.67M11.96,1.8c-1.87,1.12-3.75,2.25-5.62,3.37M12,1.8c2.09,1.3,3.4,2.13,5.55,3.47"})]}),Zi=({size:e=24,...t})=>n.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",...T,...t,children:[n.jsx("path",{fill:"#fff",d:"M14.43,16.16c2.21-1.38,4.42-2.76,6.64-4.15-3.02-1.89-6.04-3.78-9.06-5.67L2.94,12.02c2.24,1.4,4.48,2.8,6.72,4.2"}),n.jsx("path",{fill:"#fff",d:"M12.04,22.2c0-2.26-.02-4.52-.03-6.77M12.04,22.2c1.87-1.12,3.75-2.25,5.62-3.37M12,22.2c-2.09-1.3-3.4-2.13-5.55-3.47"}),n.jsx("path",{fill:A,d:"M12,13.13l9.06-5.67L12,1.8,2.94,7.46l9.06,5.67Z"})]}),qi=({size:e=24,...t})=>n.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",...T,...t,children:[n.jsx("path",{d:"M12,10.8l-9.65,6.03,9.65,6.03,9.65-6.03-9.65-6.03Z"}),n.jsx("path",{fill:"#fff",d:"M12,5.99L2.35,12.02l9.65,6.03,9.65-6.03-9.65-6.03Z"}),n.jsx("path",{fill:A,d:"M12,1.14L2.35,7.17l9.65,6.03,9.65-6.03L12,1.14Z"})]}),Qi=({size:e=24,...t})=>n.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",...T,...t,children:[n.jsx("path",{fill:A,d:"M12,10.8l-9.65,6.03,9.65,6.03,9.65-6.03-9.65-6.03Z"}),n.jsx("path",{fill:"#fff",d:"M12,5.99L2.35,12.02l9.65,6.03,9.65-6.03-9.65-6.03Z"}),n.jsx("path",{fill:"#fff",d:"M12,1.14L2.35,7.17l9.65,6.03,9.65-6.03L12,1.14Z"})]}),Ji=({iconName:e,size:t})=>{switch(e){case"save":return n.jsx($e,{size:t});case"undo":return n.jsx(Fe,{size:t});case"redo":return n.jsx(je,{size:t});case"trash":return n.jsx(Ne,{size:t});case"cross":return n.jsx(Se,{size:t});case"group":return n.jsx(Me,{size:t});case"ungroup":return n.jsx(Ce,{size:t});case"lock":return n.jsx(we,{size:t});case"unlock":return n.jsx(ve,{size:t});default:return null}},$=20,k="text-black",en=()=>{const e=te(o=>o.toolbar.actions),{executeAction:t}=b.useContext(S);return n.jsx("div",{className:"border-b border-gray-200 box-border",children:n.jsx("div",{className:"h-10 inline-flex pl-4 items-center",children:Object.values(e).map(o=>{const{id:s,icon:l,disabled:i,divide:r}=o;let a;switch(s){case"layerUp":a=n.jsx(Gi,{size:$,className:k});break;case"layerDown":a=n.jsx(Zi,{size:$,className:k});break;case"layerTop":a=n.jsx(qi,{size:$,className:k});break;case"layerBottom":a=n.jsx(Qi,{size:$,className:k});break;default:a=n.jsx(Ji,{size:$,iconName:l});break}return n.jsxs(b.Fragment,{children:[n.jsx("button",{type:"button",disabled:i,title:s,onClick:()=>{t(s)},className:"relative ml-1 rounded-sm mr-1 flex items-center cursor-pointer justify-center w-6 h-6 opacity-50   hover:bg-gray-200  hover:opacity-100 disabled:text-gray-200 disabled:cursor-default",children:a}),r&&n.jsx("div",{className:"w-[1px] h-4 bg-gray-400 mx-2"})]},s)})})})},tn=()=>n.jsxs("header",{children:[n.jsx(Ki,{}),n.jsx(en,{})]}),on=()=>{const{historyArray:e,historyCurrent:t,applyHistoryNode:o}=b.useContext(S),{t:s}=L(),l=b.useRef(null);return b.useEffect(()=>{if(l.current)return()=>{}},[e,t]),n.jsxs("div",{className:"p-2",children:[n.jsx("h1",{className:"bg-gray-600 text-white px-2",children:n.jsx("span",{children:"History"})}),n.jsx("div",{className:"border h-50 border-gray-200 overflow-x-auto scrollbar-custom overflow-y-auto",children:n.jsx("div",{className:"flex flex-col m-2 border border-gray-200 min-h-40 bg-gray-100",children:e.map((i,r)=>{const a=i===t,{label:c,tooltip:d}=s(i.data.type,{returnObjects:!0});return n.jsx("div",{title:d,ref:a?l:null,onClick:()=>{a||o(i)},className:` px-2 py-1 cursor-pointer text-xs hover:bg-gray-400 hover:text-white ${a?"bg-gray-400 text-white":""}`,children:n.jsx("span",{children:c})},r)})})})]})},sn=()=>{const{selectedProps:e}=b.useContext(S);return b.useEffect(()=>{},[e]),n.jsxs("div",{className:"p-2",children:[n.jsx("h1",{className:"bg-gray-400 text-white px-2",children:n.jsx("span",{children:"Properties"})}),n.jsx("div",{className:"scrollbar-custom overflow-x-hidden overflow-y-auto p-2 border h-30 border-gray-200 select-none",children:e&&n.jsx(ln,{props:e})})]})},ln=({props:e})=>{const t=o=>{};return n.jsxs("div",{className:"z-30 text-sm",children:[n.jsxs("div",{className:"mb-4 ",children:[n.jsxs("div",{className:"px-4 w-full h-full flex justify-between items-center",children:[n.jsx("span",{className:"",children:"X:"}),n.jsx("input",{type:"number",name:"x",value:e.x,onChange:t,className:"w-16 px-2 py-1 text-black rounded"})]}),n.jsxs("div",{className:"px-4 w-full h-full flex justify-between items-center",children:[n.jsx("span",{className:"",children:"Y:"}),n.jsx("input",{type:"number",name:"y",value:e.y,onChange:t,className:"w-16 px-2 py-1 text-black rounded"})]}),n.jsxs("div",{className:"px-4 w-full h-full flex justify-between items-center",children:[n.jsx("span",{className:"",children:"Width:"}),n.jsx("input",{type:"number",name:"width",value:e.width,onChange:t,className:"w-16 px-2 py-1 text-black rounded"})]}),n.jsxs("div",{className:"px-4 w-full h-full flex justify-between items-center",children:[n.jsx("span",{children:"Height:"}),n.jsx("input",{type:"number",name:"height",value:e.height,onChange:t,className:"w-16 px-2 py-1 text-black rounded"})]}),n.jsxs("div",{className:"px-4 w-full h-full flex justify-between items-center",children:[n.jsx("span",{children:"Radius:"}),n.jsx("input",{type:"number",name:"radius",value:e.radius,onChange:t,className:"w-16 px-2 py-1 text-black rounded"})]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("div",{className:"px-4 w-full h-full flex justify-between items-center",children:[n.jsx("span",{children:"Enable Fill"}),n.jsx("input",{type:"checkbox",name:"enableFill",checked:e.enableFill,onChange:t,className:"ml-2"})]}),n.jsxs("div",{className:"px-4 w-full h-full flex justify-between items-center",children:[n.jsx("span",{children:"Fill Color:"}),n.jsx("input",{type:"color",name:"fillColor",value:e.fillColor,onChange:t,className:"w-10 h-10 p-1 rounded"})]}),n.jsxs("div",{className:"px-4 w-full h-full flex justify-between items-center",children:[n.jsx("span",{children:"Enable Line"}),n.jsx("input",{type:"checkbox",name:"enableLine",checked:e.enableLine,onChange:t,className:"ml-2"})]}),n.jsxs("div",{className:"px-4 w-full h-full flex justify-between items-center",children:[n.jsx("span",{children:"Line Color:"}),n.jsx("input",{type:"color",name:"lineColor",value:e.lineColor,onChange:t,className:"w-10 h-10 p-1 rounded"})]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("div",{className:"px-4 w-full h-full flex justify-between items-center",children:[n.jsx("span",{children:"Shadow"}),n.jsx("input",{type:"checkbox",name:"shadow",checked:e.shadow,onChange:t,className:"ml-2"})]}),n.jsxs("div",{className:"px-4 w-full h-full flex justify-between items-center",children:[n.jsx("span",{children:"Opacity:"}),n.jsx("input",{type:"number",name:"opacity",value:e.opacity,onChange:t,className:"w-16 px-2 py-1 text-black rounded"})]}),n.jsxs("div",{className:"px-4 w-full h-full flex justify-between items-center",children:[n.jsx("span",{children:"Layer:"}),n.jsx("input",{type:"number",name:"layer",value:e.layer,onChange:t,className:"w-16 px-2 py-1 text-black rounded"})]})]})]})},nn=({file:e})=>{const t=b.useRef(null),o=b.useRef(null),[s,l]=b.useState([]),[i,r]=b.useState([]),[a,c]=b.useState(null),[d,h]=b.useState([]),[p,f]=b.useState({}),[g,x]=b.useState({width:0,height:0,offsetX:0,offsetY:0,scale:1,dx:0,dy:0,status:""}),m=b.useRef(null),[y,v]=b.useState(!0);b.useEffect(()=>{let C;if(o.current){const z=X();C=new Bi({container:o.current,data:{id:z,modules:[]},events:{onHistoryUpdated:F,onModulesUpdated:D,onSelectionUpdated:j,onViewportUpdated:R}}),an(C),t.current=C}const M=m.current;return M&&(M.addEventListener("focus",w),M.addEventListener("blur",N)),()=>{M&&(M.removeEventListener("focus",w),M.removeEventListener("blur",N)),C&&C.destroy()}},[e]);const w=()=>v(!0),N=()=>v(!1),j=(C,M)=>{h(Array.from(C)),c(M)},F=C=>{l(C.toArray()),C.current&&f(C.current)},D=C=>{const M=Array.from(C.values()).sort((z,ue)=>z.layer-ue.layer);r(M)},R=C=>{x(C)},he=C=>{t.current&&t.current.history.moveCurrentById(C)},_=(C,M=null)=>{t.current.execute(C,M)};return n.jsx(S.Provider,{value:{focused:y,historyArray:s,selectedModules:d,selectedProps:a,historyCurrent:p,viewport:g,editorRef:t,applyHistoryNode:he,executeAction:_},children:n.jsxs("div",{ref:m,"data-focused":y,autoFocus:!0,tabIndex:0,className:"outline-0 w-full h-full flex flex-col",children:[n.jsx(Ii,{}),n.jsx(tn,{}),n.jsxs("main",{className:"flex flex-row overflow-hidden h-full",children:[n.jsx(Xi,{}),n.jsxs("div",{className:"flex flex-col w-full h-full overflow-hidden",children:[n.jsx("div",{ref:o,"editor-container":"true",className:"relative overflow-hidden flex w-full h-full"}),n.jsx(Hi,{})]}),n.jsxs("div",{style:{width:200},className:"h-full flex-shrink-0 border-l border-gray-200",children:[n.jsx(sn,{}),n.jsx(_i,{data:i,selected:d,handleSelectModule:C=>{_("select",new Set([C]))}}),n.jsx(on,{})]})]})]})})},an=e=>{const s={type:"rectangle",x:100,y:100,width:100,height:100,enableLine:!0,lineColor:"#000000",lineWidth:1,enableFill:!0,fillColor:"#fff",opacity:100,shadow:!1,radius:0,rotation:0},l=2e4,i=10;e.batchAdd(e.batchCreate(Array.from({length:l}).map((r,a)=>({...s,fillColor:"#ed1c24",x:100+a*i,y:100+a*i,layer:a+1,rotation:a+10}))),"addModules")},rn=e=>[],cn=()=>{const e="Untitled 1",t={},o={modules:rn()};return{id:X(),name:e,config:t,data:o}},dn=e=>new Map(e.reduce((t,o)=>(t.push([o.id,o]),t),[])),hn=cn(),ee=dn([hn]),un=()=>{const e=' group py-2 px-6 relative transition flex items-center">',t=" bg-gray-200",o=" hover:bg-gray-200",{fileList:s,currentFileId:l,closeFile:i,switchFile:r,handleCreating:a}=b.useContext(V);return n.jsxs("div",{className:"flex flex-row items-center text-sm select-none",children:[s.map(c=>{const d=c.id===l,h=e+(d?t:o),p=(d?"visible":"invisible")+" w-2 h-2 ml-4 opacity-50 hover:opacity-100 group-hover:visible w-2 h-2 cursor-pointer";return n.jsxs("div",{className:h,onClick:()=>{r(c.id)},children:[n.jsx("span",{children:c.name}),n.jsx("span",{onClick:f=>{i(c.id),f.preventDefault(),f.stopPropagation()},className:p,children:"×"})]},c.id)}),n.jsx("button",{className:"hover:cursor-pointer hover:opacity-100 cursor-pointer opacity-50",children:n.jsx(Ee,{size:18,onClick:()=>{a(!0)}})})]})},pn=({children:e,defaultValue:t})=>{const[o,s]=b.useState(!1);return n.jsxs("div",{className:"relative w-20",children:[n.jsxs("div",{className:"flex items-center",onClick:()=>{s(!o)},children:[n.jsx(ke,{}),t]}),o&&n.jsx("div",{onClick:()=>{s(!1)},className:"absolute top-full right-0 w-full",children:e})]})},fn=()=>{const[e,t]=b.useState("en"),o={en:"English",cn:"中文",jp:"日本語"},{i18n:s}=L();return n.jsx("div",{className:"flex flex-row items-center text-sm select-none",children:n.jsx(pn,{defaultValue:o[e],children:Object.keys(o).map((l,i)=>n.jsx("div",{onClick:()=>{s.changeLanguage(l),t(l)},children:o[l]},i))})})},bn=()=>{const e=b.useRef(new Map),[t,o]=b.useState(!1),[s,l]=b.useState(""),[i,r]=b.useState([]),a=e.current.size,c=a===0||t;b.useEffect(()=>{ee.size>0&&(e.current=ee,d(),l(h()[0].id))},[]);const d=()=>{const m=h();return r(m),m},h=()=>Array.from(e.current.values()),p=m=>{l(m)},f=m=>{const y=i.findIndex(w=>w.id===m);let v=i.length;if(y!==-1&&(e.current.delete(m),d(),i.splice(y,1),v--,s===m&&v>0)){let w=y+1;y===0&&(w=0),w>v&&(w=v-1),l(i[w].id)}},g=m=>{e.current.set(m.id,m),d(),l(m.id)},x=m=>{o(m)};return n.jsx(V.Provider,{value:{fileMap:e.current,fileList:i,creating:t,currentFileId:s,switchFile:p,closeFile:f,createFile:g,handleCreating:x},children:n.jsxs("div",{className:"w-full h-full flex flex-col",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx(un,{}),n.jsx(fn,{})]}),n.jsx("div",{className:"flex-1 overflow-hidden min-h-[600px]",children:i.map(m=>m.id===s?n.jsx(nn,{file:m},m.id):void 0)}),c&&n.jsx(si,{bg:a?"#00000080":"#fff",onBgClick:()=>{a&&o(!1)}})]})})};function gn(){return n.jsx(bn,{})}const mn=[{id:"file",parent:null},{id:"newFile",parent:"file",shortcut:"Ctrl+N"},{id:"openFile",parent:"file",shortcut:"Ctrl+O"},{id:"saveFile",parent:"file",shortcut:"Ctrl+S"},{id:"saveAs",parent:"file"},{id:"importFile",parent:"file"},{id:"exportFile",parent:"file"},{id:"print",parent:"file"},{id:"closeFile",parent:"file"},{id:"exportFile_png",parent:"exportFile"},{id:"exportFile_pdf",parent:"exportFile"},{id:"exportFile_csv",parent:"exportFile"},{id:"edit",parent:null},{id:"undo",parent:"edit",shortcut:"Ctrl+Z"},{id:"redo",parent:"edit",shortcut:"Ctrl+Y"},{id:"cut",parent:"edit",shortcut:"Ctrl+X"},{id:"copy",parent:"edit",shortcut:"Ctrl+C"},{id:"paste",parent:"edit",shortcut:"Ctrl+V"},{id:"delete",parent:"edit",shortcut:"Del"},{id:"duplicate",parent:"edit",shortcut:"Ctrl+D"},{id:"selectAll",parent:"edit",shortcut:"Ctrl+A"},{id:"findReplace",parent:"edit",shortcut:"Ctrl+F"},{id:"view",parent:null},{id:"zoomIn",parent:"view",shortcut:"Ctrl++"},{id:"zoomOut",parent:"view",shortcut:"Ctrl+-"},{id:"fitToScreen",parent:"view"},{id:"toggleGrid",parent:"view"},{id:"toggleGuides",parent:"view"},{id:"fullscreenMode",parent:"view",shortcut:"F11"},{id:"shape",parent:null},{id:"addNode",parent:"shape"},{id:"deleteNode",parent:"shape"},{id:"moveNode",parent:"shape"},{id:"resizeNode",parent:"shape"},{id:"rotateNode",parent:"shape"},{id:"changeNodeColor",parent:"shape"},{id:"changeNodeBorder",parent:"shape"},{id:"changeNodeText",parent:"shape"},{id:"groupNodes",parent:"shape"},{id:"ungroupNodes",parent:"shape"},{id:"lockNode",parent:"shape"},{id:"unlockNode",parent:"shape"},{id:"connection",parent:null},{id:"addEdge",parent:"connection"},{id:"deleteEdge",parent:"connection"},{id:"changeEdgeStyle",parent:"connection"},{id:"changeEdgeColor",parent:"connection"},{id:"changeEdgeLabel",parent:"connection"},{id:"reverseEdge",parent:"connection"},{id:"text",parent:null},{id:"addText",parent:"text"},{id:"editText",parent:"text"},{id:"changeFont",parent:"text"},{id:"changeFontSize",parent:"text"},{id:"changeFontColor",parent:"text"},{id:"boldText",parent:"text",shortcut:"Ctrl+B"},{id:"italicText",parent:"text",shortcut:"Ctrl+I"},{id:"underlineText",parent:"text",shortcut:"Ctrl+U"},{id:"alignText",parent:"text"},{id:"layer",parent:null},{id:"sendToBack",parent:"layer"},{id:"bringToFront",parent:"layer"},{id:"sendBackward",parent:"layer"},{id:"bringForward",parent:"layer"},{id:"duplicateLayer",parent:"layer"},{id:"deleteLayer",parent:"layer"},{id:"toggleLayerVisibility",parent:"layer"}],xn={actions:Object.fromEntries(mn.map(e=>[e.id,{...e,disabled:!1}]))},re=U({name:"menu",initialState:xn,reducers:{setDisabled:(e,t)=>{e.actions[t.payload.id]&&(e.actions[t.payload.id].disabled=t.payload.disabled)},triggerAction:(e,t)=>{const o=e.actions[t.payload];o&&o.disabled}}}),{setDisabled:$n,triggerAction:En}=re.actions,yn=re.reducer,vn=[{id:"save",icon:"save",disabled:!0,divide:!0},{id:"undo",icon:"undo",disabled:!0},{id:"redo",icon:"redo",disabled:!0,divide:!0},{id:"delete",icon:"trash",disabled:!1},{id:"add",icon:"cross",disabled:!1,divide:!0},{id:"layerUp",icon:"layers",disabled:!1},{id:"layerDown",icon:"layers",disabled:!1},{id:"layerTop",icon:"layers",disabled:!1},{id:"layerBottom",icon:"layers",disabled:!1,divide:!0},{id:"group",icon:"group",disabled:!0},{id:"ungroup",icon:"ungroup",disabled:!0,divide:!0},{id:"lock",icon:"lock",disabled:!1},{id:"unlock",icon:"unlock",disabled:!0}],wn={actions:Object.fromEntries(vn.map(e=>[e.id,{...e,disabled:!1}]))},ce=U({name:"menu",initialState:wn,reducers:{setDisabled:(e,t)=>{e.actions[t.payload.id]&&(e.actions[t.payload.id].disabled=t.payload.disabled)},triggerAction:(e,t)=>{const o=e.actions[t.payload];o&&o.disabled}}}),{setDisabled:kn,triggerAction:Ln}=ce.actions,Cn=ce.reducer,Mn={zoom:1},de=U({name:"statusBar",initialState:Mn,reducers:{setZoom:(e,t)=>{e.zoom=t.payload}}}),{setZoom:Tn}=de.actions,Sn=de.reducer,Nn=Le({reducer:{menu:yn,toolbar:Cn,statusBar:Sn}});Te.createRoot(document.getElementById("root")).render(n.jsx(Ae,{store:Nn,children:n.jsx(gn,{})}));
